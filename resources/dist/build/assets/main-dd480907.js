function g(a,e,t,i,s,o,d,m){var n=typeof a=="function"?a.options:a;e&&(n.render=e,n.staticRenderFns=t,n._compiled=!0),i&&(n.functional=!0),o&&(n._scopeId="data-v-"+o);var c;if(d?(c=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),s&&s.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(d)},n._ssrRegister=c):s&&(c=m?function(){s.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(n.functional){n._injectStyles=c;var l=n.render;n.render=function(h,f){return c.call(f),l(h,f)}}else{var u=n.beforeCreate;n.beforeCreate=u?[].concat(u,c):[c]}return{exports:a,options:n}}const C={mixins:[Fieldtype],inject:["storeName"],data(){var a;return{hotspots:((a=this.value)==null?void 0:a.hotspots)||[]}},mounted(){this.meta.image||this.refreshImage()},computed:{},methods:{refreshImage(){const a=this.$store.state.publish[this.storeName].values,e=this.config.imageFieldHandle,t=i=>{for(const s in i){if(s===e)return i[s];if(typeof i[s]=="object"){const o=t(i[s]);if(o)return o}}};this.$axios.post("/!/statamic-imagehotspots/asset",t(a)[0]).then(i=>{this.updateMeta({image:i.data})})},addHotspot(){this.hotspots.push({x:50,y:50}),this.updateValue()},updateValue(){this.$emit("input",{hotspots:this.hotspots})},dragStart(a,e){const t=this.hotspots[a],i=e.clientX,s=e.clientY,o=t.x,d=t.y,m=c=>{const l=this.$refs.image.getBoundingClientRect(),u=48,r=(l.width-u)/l.width*100,h=(l.height-u)/l.height*100,f=100-r,p=100-h,v=Math.min(r,Math.max(f,o+(c.clientX-i)/l.width*100)),_=Math.min(h,Math.max(p,d+(c.clientY-s)/l.height*100));t.x=v,t.y=_,this.updateValue()},n=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",n)}}};var b=function(){var e=this,t=e._self._c;return this.meta.image?t("div",[t("div",{staticClass:"i-my-2 i-flex i-justify-end"},[t("button",{staticClass:"btn",on:{click:e.refreshImage}},[e._v("Refresh Image")])]),t("div",{staticClass:"i-relative"},[t("div",{staticClass:"i-absolute i-w-full i-h-full i-border-red-500 i-border-opacity-25 i-border-[48px]"}),t("img",{ref:"image",staticClass:"i-w-full i-h-auto i-select-none",attrs:{src:this.meta.image}}),e._l(e.hotspots,function(i,s){return t("div",{key:s,staticClass:"i-absolute i-cursor-move -i-translate-x-[12px] -i-translate-y-[12px]",style:{top:i.y+"%",left:i.x+"%"},on:{mousedown:function(o){return e.dragStart(s,o)}}},[t("div",{staticClass:"i-w-6 i-h-6 i-bg-blue-500 i-border-white i-border-2 i-rounded-full i-flex i-justify-center i-items-center i-text-xs"},[e._v(e._s(s))])])})],2),t("div",{staticClass:"i-mt-2 i-w-full"},[t("div",{staticClass:"i-grid i-gap-2"},e._l(e.hotspots,function(i,s){return t("div",{key:s,staticClass:"flex gap-2 items-center"},[t("div",{staticClass:"i-w-6 i-h-6 i-flex-none i-bg-blue-500 i-border-white i-border-2 i-rounded-full i-flex i-justify-center i-items-center i-text-xs",attrs:{title:"x: {hotspot.y}"}},[e._v(e._s(s))]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:i.content,expression:"hotspot.content"}],staticClass:"input-text",attrs:{rows:"2",type:"text"},domProps:{value:i.content},on:{change:e.updateValue,input:function(o){o.target.composing||e.$set(i,"content",o.target.value)}}}),e._v(" "),t("div",[t("button",{on:{click:function(o){return e.hotspots.splice(s,1)}}},[e._v(" Ã— ")])])])}),0)]),t("div",{staticClass:"i-mt-2"},[t("button",{staticClass:"btn",on:{click:e.addHotspot}},[e._v("Add Hotspot")])])]):t("div",{staticClass:"i-flex i-justify-between i-items-center"},[t("p",{staticClass:"i-mt-2 i-text-sm"},[e._v("Select an image and click the refresh button")]),t("div",{staticClass:"i-mt-2"},[t("button",{staticClass:"btn",on:{click:e.refreshImage}},[e._v("Refresh Image")])])])},y=[],x=g(C,b,y,!1,null,null,null,null);const w=x.exports;Statamic.$components.register("image_hot_spots-fieldtype",w);
