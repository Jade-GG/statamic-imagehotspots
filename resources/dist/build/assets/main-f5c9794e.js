function _(a,e,t,n,s,o,c,u){var i=typeof a=="function"?a.options:a;e&&(i.render=e,i.staticRenderFns=t,i._compiled=!0),n&&(i.functional=!0),o&&(i._scopeId="data-v-"+o);var r;if(c?(r=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),s&&s.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(c)},i._ssrRegister=r):s&&(r=u?function(){s.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:s),r)if(i.functional){i._injectStyles=r;var d=i.render;i.render=function(f,h){return r.call(h),d(f,h)}}else{var m=i.beforeCreate;i.beforeCreate=m?[].concat(m,r):[r]}return{exports:a,options:i}}const y={mixins:[Fieldtype],inject:["storeName"],data(){var a,e,t,n,s,o,c,u,i;return{data:{imageFile:{url:((e=(a=this.value)==null?void 0:a.imageFile)==null?void 0:e.url)||null,id:((n=(t=this.value)==null?void 0:t.imageFile)==null?void 0:n.id)||null,fileName:((o=(s=this.value)==null?void 0:s.imageFile)==null?void 0:o.fileName)||null,error:((u=(c=this.value)==null?void 0:c.imageFile)==null?void 0:u.error)||null},hotspots:((i=this.value)==null?void 0:i.hotspots)||[]}}},mounted(){this.config.max_files=1,this.config.min_files=0,this.config.mode="list"},watch:{data:{deep:!0,handler(){this.update(this.data)}}},computed:{imageFileId(){return this.data.imageFile.id?[this.data.imageFile.id]:[]}},methods:{updateImageFile(a){const e=["jpg","jpeg","png","gif","svg"];a[0]&&this.$axios.post(this.cpUrl("assets-fieldtype"),{assets:[a[0]]}).then(t=>{e.includes(t.data[0].extension)?this.data.imageFile={url:t.data[0].url,id:t.data[0].id,fileName:t.data[0].basename,alt:t.data[0].values.alt}:this.data.imageFile={error:"Invalid file type"}})},addHotspot(){this.data.hotspots.push({x:50,y:50,content:""})},dragStart(a,e){const t=this.data.hotspots[a],n=e.clientX,s=e.clientY,o=t.x,c=t.y,u=r=>{const d=this.$refs.image.getBoundingClientRect(),m=48,l=(d.width-m)/d.width*100,f=(d.height-m)/d.height*100,h=100-l,p=100-f,v=Math.min(l,Math.max(h,o+(r.clientX-n)/d.width*100)),g=Math.min(f,Math.max(p,c+(r.clientY-s)/d.height*100));t.x=v,t.y=g},i=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",i)},cpUrl(a){return a=Statamic.$config.get("cpUrl")+"/"+a,a.replace(/([^:])(\/\/+)/g,"$1/")}}};var C=function(){var e=this,t=e._self._c;return t("div",[t("assets-fieldtype",{ref:"assets",staticClass:"assets-fieldtype",attrs:{value:e.imageFileId,handle:"assets",config:e.config,readOnly:e.readOnly},on:{input:e.updateImageFile}}),e.data.imageFile.url?t("div",[t("div",{staticClass:"i-relative"},[t("div",{staticClass:"i-absolute i-w-full i-h-full i-border-red-500 i-border-opacity-25 i-border-[48px]"}),t("img",{ref:"image",staticClass:"i-w-full i-h-auto i-select-none",attrs:{src:e.data.imageFile.url}}),e._l(e.data.hotspots,function(n,s){return t("div",{key:s,staticClass:"i-absolute i-cursor-move -i-translate-x-[12px] -i-translate-y-[12px]",style:{top:n.y+"%",left:n.x+"%"},on:{mousedown:function(o){return e.dragStart(s,o)}}},[t("div",{staticClass:"i-w-6 i-h-6 i-bg-blue-500 i-border-white i-border-2 i-rounded-full i-flex i-justify-center i-items-center i-text-xs"},[e._v(e._s(s))])])})],2),t("div",{staticClass:"i-mt-2 i-w-full"},[t("div",{staticClass:"i-grid i-gap-2"},e._l(e.data.hotspots,function(n,s){return t("div",{key:s,staticClass:"flex gap-2 items-center"},[t("div",{staticClass:"i-w-6 i-h-6 i-flex-none i-bg-blue-500 i-border-white i-border-2 i-rounded-full i-flex i-justify-center i-items-center i-text-xs",attrs:{title:"x: {hotspot.y}"}},[e._v(e._s(s))]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.content,expression:"hotspot.content"}],staticClass:"input-text",attrs:{rows:"2",type:"text"},domProps:{value:n.content},on:{input:function(o){o.target.composing||e.$set(n,"content",o.target.value)}}}),e._v(" "),t("div",[t("button",{on:{click:function(o){return e.data.hotspots.splice(s,1)}}},[e._v(" Ã— ")])])])}),0)]),t("div",{staticClass:"i-mt-2"},[t("button",{staticClass:"btn",on:{click:e.addHotspot}},[e._v("Add Hotspot")])])]):t("div",{staticClass:"i-flex i-justify-between i-items-center"},[t("p",{staticClass:"i-mt-2 i-text-sm"},[e._v("Select an image")])])],1)},b=[],x=_(y,C,b,!1,null,null,null,null);const F=x.exports;Statamic.$components.register("image_hot_spots-fieldtype",F);
